"use strict";(function(a){if(typeof define==="function"&&define.amd){define(a);}else{window.DataBind=a();}})(function(){var y={};var x="data-key";function r(B){return(B&&window.jQuery&&B instanceof window.jQuery);}function f(B){if(r(B)){return B[0];}return B;}function s(B){console.log("#"+this.id+" ev:"+B.type+" new val:"+p(this));}function p(H,E){if(!H){return undefined;}var I=(E!==undefined);if(["checkbox","radio"].indexOf(H.type)>=0){if(I){H.checked=!!E;}return H.checked;}if(["text","textarea","select-one"].indexOf(H.type)>=0){if(I){H.value=E;}return H.value;}if(["select-multiple"].indexOf(H.type)>=0){if(I){if(!i(E)){E=[E];}}var C=[];var D=H&&H.options;var G;for(var F=0,B=D.length;F<B;F++){G=D[F];if(I){if(E.indexOf(G.value)>-1){G.selected=true;}else{G.selected=false;}}if(G.selected){C.push(G.value||G.text);}}return C;}if(I){H.innerText=E;}return H.innerText;}function i(B){return(Object.prototype.toString.call(B)==="[object Array]");}function w(B){if(["checkbox","radio","select-one","select-multiple"].indexOf(B.type)>=0){return"change";}if(["text","textarea"].indexOf(B.type)>=0){return"input";}}function a(B){if(!B.hashkey){B.hashkey=Date.now()+Math.floor(Math.random()*100000);}return B.hashkey;}function g(D,C){if(!D||!C){return;}var E=a(D);y[E]=y[E]||[];if(y[E].indexOf(C)>-1){return;}y[E].push(C);var B=w(D);D.addEventListener(B,C,false);}function e(E,D){var F=a(E);var B=y[F].indexOf(D);if(!y[F]||B===-1){return;}y[F].splice(B,1);var C=w(E);E.removeEventListener(C,D,false);}function b(F){var G=a(F);var E=y[G];if(!F||!E){return;}var D=E.concat();var C,B=D.length;for(C=0;C<B;C++){e(F,D[C]);}}function c(B,E){var F=E.split(".");var D=B;var C;for(C=0;C<F.length;C++){if(!D.hasOwnProperty(F[C])){return false;}D=D[F[C]];}return true;}function n(B,E){var F=E.split(".");var D=B;var C;for(C=0;C<F.length-1;C++){D=D[F[C]];}return D;}function m(D,E,C){var F=E.split(".");var B=n(D,E);if(C!==undefined){B[F[F.length-1]]=C;}return B[F[F.length-1]];}function h(E,C,B){var D=(function(I,G,F,H,J){return function(L){var K=J(this);H(G,F,K);};})(E,C,B,m,p);g(E,D);g(E,s);}function l(B){b(B);}function o(E,C,B){var D=(function(H,G,F,I){return function(L,M,K,J){I(H,K);};})(E,C,B,p);WatchJS.watch(C,B,D);}function k(C,B){var E=C.watchers[B];var D;for(D=0;D<E.length;D++){WatchJS.unwatch(C,B,E[D]);}}function j(B){if(!B){return;}return B.getAttribute(x);}function v(B){B=B||{};B={dom:(B.dom!==undefined)?B.dom:true,model:(B.model!==undefined)?B.model:true,children:(B.children!==undefined)?B.children:true};return B;}function u(F,D){if(!F||!D){return{};}var E=j(F);if(!E){return{};}var G=c(D,E);var C=n(D,E);var B=E.split(".");B=B[B.length-1];return{key:E,deepKey:B,deepModel:C,keyExists:G};}function A(E,C,B){if(!E||!C){return;}var D=u(E,C);if(!D.keyExists){return;}var F=m(C,D.key);p(E,F);if(B.dom){h(E,D.deepModel,D.deepKey);}if(B.model){o(E,D.deepModel,D.deepKey);}}function q(E,C,B){if(!E||!C){return;}var D=u(E,C);if(!D.keyExists){return;}if(B.dom){l(E);}if(B.model){k(D.deepModel,D.deepKey);}}function t(F,B){var E=[F],D,C;if(B.children){D=F.getElementsByTagName("*");for(C=0;C<D.length;C++){E.push(D[C]);}}return E;}function z(F,D,B){if(!F||!D){return;}var G=f(F);if(G!==F){arguments[0]=G;return z.apply(this,arguments);}B=v(B);var C=t(F,B);var E;for(E=0;E<C.length;E++){A(C[E],D,{dom:B.dom,model:B.model});}}function d(F,D,B){if(!F||!D){return;}var G=f(F);if(G!==F){arguments[0]=G;return d.apply(this,arguments);}B=v(B);var C=t(F,B);var E;for(E=0;E<C.length;E++){q(C[E],D,{dom:B.dom,model:B.model});}}return{bind:z,unbind:d};});